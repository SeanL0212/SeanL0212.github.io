{"version":3,"file":"vendor_react-remove-scroll_dist_es2015_SideEffect.js-DmkKQ9iB.js","sources":["../../frontend/node_modules/react-remove-scroll/dist/es2015/SideEffect.js"],"sourcesContent":["import { __spreadArray } from \"tslib\";\nimport * as React from 'react';\nimport { RemoveScrollBar } from 'react-remove-scroll-bar';\nimport { styleSingleton } from 'react-style-singleton';\nimport { nonPassive } from './aggresiveCapture';\nimport { handleScroll, locationCouldBeScrolled } from './handleScroll';\nexport var getTouchXY = function (event) {\n    return 'changedTouches' in event ? [event.changedTouches[0].clientX, event.changedTouches[0].clientY] : [0, 0];\n};\nexport var getDeltaXY = function (event) { return [event.deltaX, event.deltaY]; };\nvar extractRef = function (ref) {\n    return ref && 'current' in ref ? ref.current : ref;\n};\nvar deltaCompare = function (x, y) { return x[0] === y[0] && x[1] === y[1]; };\nvar generateStyle = function (id) { return \"\\n  .block-interactivity-\".concat(id, \" {pointer-events: none;}\\n  .allow-interactivity-\").concat(id, \" {pointer-events: all;}\\n\"); };\nvar idCounter = 0;\nvar lockStack = [];\nexport function RemoveScrollSideCar(props) {\n    var shouldPreventQueue = React.useRef([]);\n    var touchStartRef = React.useRef([0, 0]);\n    var activeAxis = React.useRef();\n    var id = React.useState(idCounter++)[0];\n    var Style = React.useState(styleSingleton)[0];\n    var lastProps = React.useRef(props);\n    React.useEffect(function () {\n        lastProps.current = props;\n    }, [props]);\n    React.useEffect(function () {\n        if (props.inert) {\n            document.body.classList.add(\"block-interactivity-\".concat(id));\n            var allow_1 = __spreadArray([props.lockRef.current], (props.shards || []).map(extractRef), true).filter(Boolean);\n            allow_1.forEach(function (el) { return el.classList.add(\"allow-interactivity-\".concat(id)); });\n            return function () {\n                document.body.classList.remove(\"block-interactivity-\".concat(id));\n                allow_1.forEach(function (el) { return el.classList.remove(\"allow-interactivity-\".concat(id)); });\n            };\n        }\n        return;\n    }, [props.inert, props.lockRef.current, props.shards]);\n    var shouldCancelEvent = React.useCallback(function (event, parent) {\n        if (('touches' in event && event.touches.length === 2) || (event.type === 'wheel' && event.ctrlKey)) {\n            return !lastProps.current.allowPinchZoom;\n        }\n        var touch = getTouchXY(event);\n        var touchStart = touchStartRef.current;\n        var deltaX = 'deltaX' in event ? event.deltaX : touchStart[0] - touch[0];\n        var deltaY = 'deltaY' in event ? event.deltaY : touchStart[1] - touch[1];\n        var currentAxis;\n        var target = event.target;\n        var moveDirection = Math.abs(deltaX) > Math.abs(deltaY) ? 'h' : 'v';\n        // allow horizontal touch move on Range inputs. They will not cause any scroll\n        if ('touches' in event && moveDirection === 'h' && target.type === 'range') {\n            return false;\n        }\n        var canBeScrolledInMainDirection = locationCouldBeScrolled(moveDirection, target);\n        if (!canBeScrolledInMainDirection) {\n            return true;\n        }\n        if (canBeScrolledInMainDirection) {\n            currentAxis = moveDirection;\n        }\n        else {\n            currentAxis = moveDirection === 'v' ? 'h' : 'v';\n            canBeScrolledInMainDirection = locationCouldBeScrolled(moveDirection, target);\n            // other axis might be not scrollable\n        }\n        if (!canBeScrolledInMainDirection) {\n            return false;\n        }\n        if (!activeAxis.current && 'changedTouches' in event && (deltaX || deltaY)) {\n            activeAxis.current = currentAxis;\n        }\n        if (!currentAxis) {\n            return true;\n        }\n        var cancelingAxis = activeAxis.current || currentAxis;\n        return handleScroll(cancelingAxis, parent, event, cancelingAxis === 'h' ? deltaX : deltaY, true);\n    }, []);\n    var shouldPrevent = React.useCallback(function (_event) {\n        var event = _event;\n        if (!lockStack.length || lockStack[lockStack.length - 1] !== Style) {\n            // not the last active\n            return;\n        }\n        var delta = 'deltaY' in event ? getDeltaXY(event) : getTouchXY(event);\n        var sourceEvent = shouldPreventQueue.current.filter(function (e) { return e.name === event.type && (e.target === event.target || event.target === e.shadowParent) && deltaCompare(e.delta, delta); })[0];\n        // self event, and should be canceled\n        if (sourceEvent && sourceEvent.should) {\n            if (event.cancelable) {\n                event.preventDefault();\n            }\n            return;\n        }\n        // outside or shard event\n        if (!sourceEvent) {\n            var shardNodes = (lastProps.current.shards || [])\n                .map(extractRef)\n                .filter(Boolean)\n                .filter(function (node) { return node.contains(event.target); });\n            var shouldStop = shardNodes.length > 0 ? shouldCancelEvent(event, shardNodes[0]) : !lastProps.current.noIsolation;\n            if (shouldStop) {\n                if (event.cancelable) {\n                    event.preventDefault();\n                }\n            }\n        }\n    }, []);\n    var shouldCancel = React.useCallback(function (name, delta, target, should) {\n        var event = { name: name, delta: delta, target: target, should: should, shadowParent: getOutermostShadowParent(target) };\n        shouldPreventQueue.current.push(event);\n        setTimeout(function () {\n            shouldPreventQueue.current = shouldPreventQueue.current.filter(function (e) { return e !== event; });\n        }, 1);\n    }, []);\n    var scrollTouchStart = React.useCallback(function (event) {\n        touchStartRef.current = getTouchXY(event);\n        activeAxis.current = undefined;\n    }, []);\n    var scrollWheel = React.useCallback(function (event) {\n        shouldCancel(event.type, getDeltaXY(event), event.target, shouldCancelEvent(event, props.lockRef.current));\n    }, []);\n    var scrollTouchMove = React.useCallback(function (event) {\n        shouldCancel(event.type, getTouchXY(event), event.target, shouldCancelEvent(event, props.lockRef.current));\n    }, []);\n    React.useEffect(function () {\n        lockStack.push(Style);\n        props.setCallbacks({\n            onScrollCapture: scrollWheel,\n            onWheelCapture: scrollWheel,\n            onTouchMoveCapture: scrollTouchMove,\n        });\n        document.addEventListener('wheel', shouldPrevent, nonPassive);\n        document.addEventListener('touchmove', shouldPrevent, nonPassive);\n        document.addEventListener('touchstart', scrollTouchStart, nonPassive);\n        return function () {\n            lockStack = lockStack.filter(function (inst) { return inst !== Style; });\n            document.removeEventListener('wheel', shouldPrevent, nonPassive);\n            document.removeEventListener('touchmove', shouldPrevent, nonPassive);\n            document.removeEventListener('touchstart', scrollTouchStart, nonPassive);\n        };\n    }, []);\n    var removeScrollBar = props.removeScrollBar, inert = props.inert;\n    return (React.createElement(React.Fragment, null,\n        inert ? React.createElement(Style, { styles: generateStyle(id) }) : null,\n        removeScrollBar ? React.createElement(RemoveScrollBar, { noRelative: props.noRelative, gapMode: props.gapMode }) : null));\n}\nfunction getOutermostShadowParent(node) {\n    var shadowParent = null;\n    while (node !== null) {\n        if (node instanceof ShadowRoot) {\n            shadowParent = node.host;\n            node = node.host;\n        }\n        node = node.parentNode;\n    }\n    return shadowParent;\n}\n"],"names":["getTouchXY","event","getDeltaXY","extractRef","ref","deltaCompare","x","y","generateStyle","id","idCounter","lockStack","RemoveScrollSideCar","props","shouldPreventQueue","React.useRef","touchStartRef","activeAxis","React.useState","Style","styleSingleton","lastProps","React.useEffect","allow_1","__spreadArray","el","shouldCancelEvent","React.useCallback","parent","touch","touchStart","deltaX","deltaY","currentAxis","target","moveDirection","canBeScrolledInMainDirection","locationCouldBeScrolled","cancelingAxis","handleScroll","shouldPrevent","_event","delta","sourceEvent","e","shardNodes","node","shouldStop","shouldCancel","name","should","getOutermostShadowParent","scrollTouchStart","scrollWheel","scrollTouchMove","nonPassive","inst","removeScrollBar","inert","React.createElement","React.Fragment","RemoveScrollBar","shadowParent"],"mappings":"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","x_google_ignoreList":[0]}